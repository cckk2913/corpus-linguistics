{"id":232168295,"title":"#新手 C語言 檔案寫入的問題","content":"1.問題\n        寫了一個小程式來練習\n        程式執行上是正常的,但有個問題\n        就是每當我輸入新的帳號和密碼時,都必須要關閉程式,程式才會把變更寫入檔案\n\tex.\n              如果我今天先建立檔案(1)->輸入帳號和密碼(2)->選擇\"顯示帳號和密碼\"(3)\n\t程式無法顯示我剛才輸入的帳號和密碼,必須要關閉程式,再執行一次並選擇\"顯示帳號和密碼\"(3)才能顯示文件的內容\n             而我也嘗試過在輸入完帳號和密碼之後,用notepad++來開啟文件,輸入完的帳號和密碼並沒有寫入文件,必須要關閉程式,變更才會被寫入文件\n             請問這個是因為fopen和fprintf函式只能在在程式結束前才把變更寫入檔案嗎? \n             還是我哪個地方寫錯了呢?\n             謝謝各位\n\t\n2.程式碼\n#include <stdio.h>\n#include <stdlib.h>\n#include <ctype.h>\n#include <string.h>\n#include <math.h>\n\n\nint main()\n{\n    FILE * fp;\n    int choice;\n\n    char account[30];\n    char password[30];\n    char singleline[100];\n\n    printf(\"Welcome to password management system!\\n\");\n    printf(\"If this is the first time you're using this system , you will have to create the password file first\\n\");\n    printf(\"==============================================\");\n    printf(\"\\n\");\n\n    while(1 == 1)\n    {\n        printf(\"1.Create password list\\n\");\n        printf(\"2.Add new account and password\\n\");\n        printf(\"3.Display the entire password list\\n\");\n        printf(\"4.Exit\\n\");\n        printf(\"Please select what do you want to do:\");\n        scanf(\"%d\",&choice);\n        fflush(stdin);\n\n\n        if(choice == 1)\n        {\n            fp = fopen(\"Password.txt\" , \"w\");\n\n            fprintf(fp , \"--------------Password list--------------\");\n\n            printf(\"The [Password.txt] has been created!\\n\");\n            printf(\"------------------------------------------\\n\");\n        }\n\n        else if(choice == 2)\n        {\n            fp = fopen(\"Password.txt\" , \"a\");\n            printf(\"Please input your account:\");\n            scanf(\"%s\",account);\n\n            printf(\"Please input your password:\");\n            scanf(\"%s\",password);\n\n            fprintf(fp , \"\\nAccount: %s\", account);\n            fprintf(fp , \"\\nPassword: %s\" , password);\n            fprintf(fp , \"\\n=====================================\");\n\n            printf(\"-----------------------------------------\\n\");\n\n        }\n\n        else if(choice == 3)\n        {\n\n            fp = fopen(\"Password.txt\" , \"r\");\n\n            while(!feof(fp))\n            {\n                fgets(singleline , 100 , fp);\n                puts(singleline);\n            }\n\n            printf(\"\\n-----------------------------------------\\n\");\n        }\n\n        else if(choice == 4)\n        {\n            break;\n        }\n\n        else\n        {\n            printf(\"\\n----------------------------------------\\n\");\n            printf(\"Please input 1 / 2 / 3 / 4\\n\");\n            printf(\"\\n----------------------------------------\\n\");\n        }\n    }\n\nfclose(fp);\n    return 0;\n}\n\n---------\n備註:\n這不是作業\n我剛剛在學c\n想整合thenewboston - C programming tutorial 50~52集所學的內容","excerpt":"1.問題，寫了一個小程式來練習，程式執行上是正常的，但有個問題，就是每當我輸入新的帳號和密碼時，都必須要關閉程式，程式才會把變更寫入檔案，ex.，如果我今天先建立檔案（1）->輸入帳號和密碼（2）->","anonymousSchool":false,"anonymousDepartment":false,"pinned":false,"forumId":"a6dc1b6b-0aca-4004-86c8-3af6cdbfad23","replyId":null,"createdAt":"2019-09-25T14:37:58.062Z","updatedAt":"2019-09-25T14:43:25.995Z","commentCount":8,"likeCount":5,"tags":[],"topics":[],"supportedReactions":null,"withNickname":false,"reportReason":"","hiddenByAuthor":false,"meta":{"layout":"classic"},"forumName":"軟體工程師","forumAlias":"softwareengineer","school":"逢甲大學","department":"資訊工程學系","replyTitle":null,"gender":"M","personaSubscriptable":true,"reactions":[{"id":"286f599c-f86a-4932-82f0-f5a06f1eca03","count":5}],"hidden":false,"customStyle":null,"isSuspiciousAccount":false,"layout":"classic","withImages":false,"withVideos":false,"media":[],"reportReasonText":"","mediaMeta":[],"postAvatar":""}